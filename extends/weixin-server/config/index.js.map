{"version":3,"sources":["../../../modules/weixin-server/src/config/index.js"],"names":["getConfig","host","origin","loginUrl","fileUrl","pushUrl","matchResult","match","prefix","suffix","indexOf","config","baseUri","API_jsLogin","API_login","API_synccheck","API_webwxdownloadmedia","API_webwxuploadmedia","API_webwxpreview","API_webwxinit","API_webwxgetcontact","API_webwxsync","API_webwxbatchgetcontact","API_webwxgeticon","API_webwxsendmsg","API_webwxsendmsgimg","API_webwxsendmsgvedio","API_webwxsendemoticon","API_webwxsendappmsg","API_webwxgetheadimg","API_webwxgetmsgimg","API_webwxgetmedia","API_webwxgetvideo","API_webwxlogout","API_webwxgetvoice","API_webwxupdatechatroom","API_webwxcreatechatroom","API_webwxstatusnotify","API_webwxcheckurl","API_webwxverifyuser","API_webwxfeedback","API_webwxreport","API_webwxsearch","API_webwxoplog","API_checkupload","API_webwxrevokemsg","Object","assign","baseConfig"],"mappings":"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","file":"index.js","sourcesContent":["import baseConfig from \"./base\";\r\n\r\n/**\r\n * 获取配置信息\r\n * @param {string} host - 主机地址\r\n * @returns {object} - 配置信息对象\r\n */\r\nexport function getConfig(host) {\r\n\thost = host || \"wx.qq.com\"; // 如果 host 未定义，则默认设置为 \"wx.qq.com\"\r\n\r\n\tlet origin = `https://${host}`; // 构建 origin 变量，以 https:// 开头，后跟 host 变量的值\r\n\tlet loginUrl = \"login.weixin.qq.com\"; // 设置默认的登录 URL\r\n\tlet fileUrl = \"file.wx.qq.com\"; // 设置默认的文件 URL\r\n\tlet pushUrl = \"webpush.weixin.qq.com\"; // 设置默认的推送 URL\r\n\r\n\t// 使用正则表达式匹配 host 中的特定部分\r\n\tlet matchResult = host.match(/(\\w+)(.qq.com|.wechat.com)/);\r\n\tif (matchResult && matchResult[1] && matchResult[2]) {\r\n\t\tlet prefix = matchResult[1]; // 匹配结果的第一个组成部分\r\n\t\tlet suffix = matchResult[2]; // 匹配结果的第二个组成部分\r\n\r\n\t\t// 如果匹配到的后缀是 \".qq.com\"\r\n\t\tif (suffix === \".qq.com\") {\r\n\t\t\tprefix = ~[\"wx\", \"wx2\", \"wx8\"].indexOf(prefix) ? prefix : \"wx\"; // 如果 prefix 在 [\"wx\", \"wx2\", \"wx8\"] 数组中，则保持原值，否则设置为 \"wx\"\r\n\t\t}\r\n\r\n\t\t// 如果匹配到的后缀是 \".wechat.com\"\r\n\t\telse {\r\n\t\t\tprefix = ~[\"web\", \"web2\"].indexOf(prefix) ? prefix : \"web\"; // 如果 prefix 在 [\"web\", \"web2\"] 数组中，则保持原值，否则设置为 \"web\"\r\n\t\t}\r\n\r\n\t\tloginUrl = `login.${prefix}${suffix}`; // 根据 prefix 和 suffix 构建登录 URL\r\n\t\tfileUrl = `file.${prefix}${suffix}`; // 根据 prefix 和 suffix 构建文件 URL\r\n\t\tpushUrl = `webpush.${prefix}${suffix}`; // 根据 prefix 和 suffix 构建推送 URL\r\n\r\n\t\tlet config = {}; // 创建一个空对象，用于存储配置信息\r\n\r\n\t\tconfig.origin = origin; // 将 origin 的值赋给 config 对象的 origin 属性\r\n\t\tconfig.baseUri = origin + \"/cgi-bin/mmwebwx-bin\"; // 构建 baseUri，将 origin 和 \"/cgi-bin/mmwebwx-bin\" 拼接起来，赋给 config 对象的 baseUri 属性\r\n\r\n\t\t// 根据不同的 URL 构建 config 对象的各个属性\r\n\t\tconfig.API_jsLogin = \"https://\" + loginUrl + \"/jslogin?appid=wx782c26e4c19acffb&fun=new&lang=zh-CN\"; // 获取登录二维码的URL\r\n\r\n\t\tconfig.API_login = \"https://\" + loginUrl + \"/cgi-bin/mmwebwx-bin/login\"; // 登录的URL\r\n\r\n\t\tconfig.API_synccheck = \"https://\" + pushUrl + \"/cgi-bin/mmwebwx-bin/synccheck\"; // 同步检查的URL\r\n\r\n\t\tconfig.API_webwxdownloadmedia = \"https://\" + fileUrl + \"/cgi-bin/mmwebwx-bin/webwxgetmedia\"; // 下载媒体文件的URL\r\n\r\n\t\tconfig.API_webwxuploadmedia = \"https://\" + fileUrl + \"/cgi-bin/mmwebwx-bin/webwxuploadmedia\"; // 上传媒体文件的URL\r\n\r\n\t\tconfig.API_webwxpreview = origin + \"/cgi-bin/mmwebwx-bin/webwxpreview\"; // 预览图片消息的URL\r\n\r\n\t\tconfig.API_webwxinit = origin + \"/cgi-bin/mmwebwx-bin/webwxinit\"; // 初始化微信接口的URL\r\n\r\n\t\tconfig.API_webwxgetcontact = origin + \"/cgi-bin/mmwebwx-bin/webwxgetcontact\"; // 获取联系人列表的URL\r\n\r\n\t\tconfig.API_webwxsync = origin + \"/cgi-bin/mmwebwx-bin/webwxsync\"; // 同步微信消息的URL\r\n\r\n\t\tconfig.API_webwxbatchgetcontact = origin + \"/cgi-bin/mmwebwx-bin/webwxbatchgetcontact\"; // 批量获取联系人信息的URL\r\n\r\n\t\tconfig.API_webwxgeticon = origin + \"/cgi-bin/mmwebwx-bin/webwxgeticon\"; // 获取头像的URL\r\n\r\n\t\tconfig.API_webwxsendmsg = origin + \"/cgi-bin/mmwebwx-bin/webwxsendmsg\"; // 发送文本消息的URL\r\n\r\n\t\tconfig.API_webwxsendmsgimg = origin + \"/cgi-bin/mmwebwx-bin/webwxsendmsgimg\"; // 发送图片消息的URL\r\n\r\n\t\tconfig.API_webwxsendmsgvedio = origin + \"/cgi-bin/mmwebwx-bin/webwxsendvideomsg\"; // 发送视频消息的URL\r\n\r\n\t\tconfig.API_webwxsendemoticon = origin + \"/cgi-bin/mmwebwx-bin/webwxsendemoticon\"; // 发送表情消息的URL\r\n\r\n\t\tconfig.API_webwxsendappmsg = origin + \"/cgi-bin/mmwebwx-bin/webwxsendappmsg\"; // 发送应用消息的URL\r\n\r\n\t\tconfig.API_webwxgetheadimg = origin + \"/cgi-bin/mmwebwx-bin/webwxgetheadimg\"; // 获取群头像的URL\r\n\r\n\t\tconfig.API_webwxgetmsgimg = origin + \"/cgi-bin/mmwebwx-bin/webwxgetmsgimg\"; // 获取消息图片的URL\r\n\r\n\t\tconfig.API_webwxgetmedia = origin + \"/cgi-bin/mmwebwx-bin/webwxgetmedia\"; // 获取媒体文件的URL\r\n\r\n\t\tconfig.API_webwxgetvideo = origin + \"/cgi-bin/mmwebwx-bin/webwxgetvideo\"; // 获取视频消息的URL\r\n\r\n\t\tconfig.API_webwxlogout = origin + \"/cgi-bin/mmwebwx-bin/webwxlogout\"; // 退出登录的URL\r\n\r\n\t\tconfig.API_webwxgetvoice = origin + \"/cgi-bin/mmwebwx-bin/webwxgetvoice\"; // 获取语音消息的URL\r\n\r\n\t\tconfig.API_webwxupdatechatroom = origin + \"/cgi-bin/mmwebwx-bin/webwxupdatechatroom\"; // 更新群组信息的URL\r\n\r\n\t\tconfig.API_webwxcreatechatroom = origin + \"/cgi-bin/mmwebwx-bin/webwxcreatechatroom\"; // 创建群聊的URL\r\n\r\n\t\tconfig.API_webwxstatusnotify = origin + \"/cgi-bin/mmwebwx-bin/webwxstatusnotify\"; // 微信状态通知的URL\r\n\r\n\t\tconfig.API_webwxcheckurl = origin + \"/cgi-bin/mmwebwx-bin/webwxcheckurl\"; // 检查链接是否安全的URL\r\n\r\n\t\tconfig.API_webwxverifyuser = origin + \"/cgi-bin/mmwebwx-bin/webwxverifyuser\"; // 验证用户信息的URL\r\n\r\n\t\tconfig.API_webwxfeedback = origin + \"/cgi-bin/mmwebwx-bin/webwxsendfeedback\"; // 发送反馈信息的URL\r\n\r\n\t\tconfig.API_webwxreport = origin + \"/cgi-bin/mmwebwx-bin/webwxstatreport\"; // 上报统计数据的URL\r\n\r\n\t\tconfig.API_webwxsearch = origin + \"/cgi-bin/mmwebwx-bin/webwxsearchcontact\"; // 搜索联系人的URL\r\n\r\n\t\tconfig.API_webwxoplog = origin + \"/cgi-bin/mmwebwx-bin/webwxoplog\"; // 操作日志的URL\r\n\r\n\t\tconfig.API_checkupload = origin + \"/cgi-bin/mmwebwx-bin/webwxcheckupload\"; // 检查上传媒体文件的URL\r\n\r\n\t\tconfig.API_webwxrevokemsg = origin + \"/cgi-bin/mmwebwx-bin/webwxrevokemsg\"; // 撤回消息的URL\r\n\r\n\t\treturn Object.assign(config, baseConfig); // 将 defaultConfig 对象的属性合并到 config 对象中，并返回合并后的结果\r\n\t}\r\n}\r\n"]}