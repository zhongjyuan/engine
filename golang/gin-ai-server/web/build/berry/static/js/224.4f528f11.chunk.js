"use strict";(self.webpackChunkgin_ai_server_web=self.webpackChunkgin_ai_server_web||[]).push([[224],{8032:function(e,t,n){n.d(t,{p:function(){return a}});const a={1:{key:1,text:"OpenAI",value:1,color:"primary"},14:{key:14,text:"Anthropic Claude",value:14,color:"info"},3:{key:3,text:"Azure OpenAI",value:3,color:"secondary"},11:{key:11,text:"Google PaLM2",value:11,color:"orange"},24:{key:24,text:"Google Gemini",value:24,color:"orange"},28:{key:28,text:"Mistral AI",value:28,color:"orange"},15:{key:15,text:"\u767e\u5ea6\u6587\u5fc3\u5343\u5e06",value:15,color:"default"},17:{key:17,text:"\u963f\u91cc\u901a\u4e49\u5343\u95ee",value:17,color:"default"},18:{key:18,text:"\u8baf\u98de\u661f\u706b\u8ba4\u77e5",value:18,color:"default"},16:{key:16,text:"\u667a\u8c31 ChatGLM",value:16,color:"default"},19:{key:19,text:"360 \u667a\u8111",value:19,color:"default"},25:{key:25,text:"Moonshot AI",value:19,color:"default"},23:{key:23,text:"\u817e\u8baf\u6df7\u5143",value:23,color:"default"},26:{key:26,text:"\u767e\u5ddd\u5927\u6a21\u578b",value:26,color:"default"},27:{key:27,text:"MiniMax",value:27,color:"default"},29:{key:29,text:"Groq",value:29,color:"default"},30:{key:30,text:"Ollama",value:30,color:"default"},31:{key:31,text:"\u96f6\u4e00\u4e07\u7269",value:31,color:"default"},8:{key:8,text:"\u81ea\u5b9a\u4e49\u6e20\u9053",value:8,color:"primary"},22:{key:22,text:"\u77e5\u8bc6\u5e93\uff1aFastGPT",value:22,color:"default"},21:{key:21,text:"\u77e5\u8bc6\u5e93\uff1aAI Proxy",value:21,color:"purple"},20:{key:20,text:"\u4ee3\u7406\uff1aOpenRouter",value:20,color:"primary"},2:{key:2,text:"\u4ee3\u7406\uff1aAPI2D",value:2,color:"primary"},5:{key:5,text:"\u4ee3\u7406\uff1aOpenAI-SB",value:5,color:"primary"},7:{key:7,text:"\u4ee3\u7406\uff1aOhMyGPT",value:7,color:"primary"},10:{key:10,text:"\u4ee3\u7406\uff1aAI Proxy",value:10,color:"primary"},4:{key:4,text:"\u4ee3\u7406\uff1aCloseAI",value:4,color:"primary"},6:{key:6,text:"\u4ee3\u7406\uff1aOpenAI Max",value:6,color:"primary"},9:{key:9,text:"\u4ee3\u7406\uff1aAI.LS",value:9,color:"primary"},12:{key:12,text:"\u4ee3\u7406\uff1aAPI2GPT",value:12,color:"primary"},13:{key:13,text:"\u4ee3\u7406\uff1aAIGC2D",value:13,color:"primary"}}},1736:function(e,t,n){n.d(t,{re:function(){return a}});n(1838);const a=10;n(8032)},1675:function(e,t,n){var a=n(5043),r=n(6446),l=n(6240),o=n(4535),i=n(310),s=n(579);const c=(0,a.forwardRef)(((e,t)=>{let{children:n,color:a="default",variant:o="soft",startIcon:i,endIcon:c,sx:u,...h}=e;const p=(0,l.A)(),x={width:16,height:16,"& svg, img":{width:1,height:1,objectFit:"cover"}};return(0,s.jsxs)(d,{ref:t,component:"span",ownerState:{color:a,variant:o},sx:{...i&&{pl:.75},...c&&{pr:.75},...u},theme:p,...h,children:[i&&(0,s.jsxs)(r.A,{sx:{mr:.75,...x},children:[" ",i," "]}),n,c&&(0,s.jsxs)(r.A,{sx:{ml:.75,...x},children:[" ",c," "]})]})}));t.A=c;const d=(0,o.Ay)(r.A)((e=>{var t,n,a,r,l;let{theme:o,ownerState:s}=e;const c="filled"===s.variant,d="outlined"===s.variant,u="soft"===s.variant,h="ghost"===s.variant,p={..."default"===s.color&&{...c&&{color:o.palette.grey[300],backgroundColor:o.palette.text.primary},...d&&{color:o.palette.grey[500],border:`2px solid ${o.palette.grey[500]}`},...u&&{color:o.palette.text.secondary,backgroundColor:(0,i.X4)(o.palette.grey[500],.16)}}},x={..."default"!==s.color&&{...c&&{color:o.palette.background.paper,backgroundColor:null===(t=o.palette[s.color])||void 0===t?void 0:t.main},...d&&{backgroundColor:"transparent",color:null===(n=o.palette[s.color])||void 0===n?void 0:n.main,border:`2px solid ${null===(a=o.palette[s.color])||void 0===a?void 0:a.main}`},...u&&{color:o.palette[s.color].dark,backgroundColor:(0,i.X4)(null===(r=o.palette[s.color])||void 0===r?void 0:r.main,.16)},...h&&{color:null===(l=o.palette[s.color])||void 0===l?void 0:l.main}}};return{height:24,minWidth:24,lineHeight:0,borderRadius:6,cursor:"default",alignItems:"center",whiteSpace:"nowrap",display:"inline-flex",justifyContent:"center",padding:o.spacing(0,.75),fontSize:o.typography.pxToRem(12),fontWeight:o.typography.fontWeightBold,transition:o.transitions.create("all",{duration:o.transitions.duration.shorter}),...p,...x}}))},8721:function(e,t,n){var a=n(4535),r=n(4598);const l=(0,a.Ay)(r.A)((e=>{let{theme:t}=e;return{padding:8,"& .MuiSwitch-track":{borderRadius:11,"&:before, &:after":{content:'""',position:"absolute",top:"50%",transform:"translateY(-50%)",width:16,height:16},"&:before":{backgroundImage:`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 24 24"><path fill="${encodeURIComponent(t.palette.getContrastText(t.palette.primary.main))}" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg>')`,left:12},"&:after":{backgroundImage:`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 24 24"><path fill="${encodeURIComponent(t.palette.getContrastText(t.palette.primary.main))}" d="M19,13H5V11H19V13Z" /></svg>')`,right:12}},"& .MuiSwitch-thumb":{boxShadow:"none",width:16,height:16,margin:2}}}));t.A=l},5098:function(e,t,n){n.d(t,{A:function(){return c}});var a=n(5263),r=n(4050),l=n(1787),o=n(6240),i=n(8302),s=n(579);function c(e){let{filterName:t,handleFilterName:n,placeholder:c}=e;const d=(0,o.A)().palette.grey[500];return(0,s.jsx)(a.A,{sx:{height:80,display:"flex",justifyContent:"space-between",p:e=>e.spacing(0,1,0,3)},children:(0,s.jsx)(r.A,{id:"keyword",sx:{minWidth:"100%"},value:t,onChange:n,placeholder:c,startAdornment:(0,s.jsx)(l.A,{position:"start",children:(0,s.jsx)(i.A,{stroke:1.5,size:"20px",color:d})})})})}},6224:function(e,t,n){n.r(t),n.d(t,{default:function(){return ne}});var a=n(5043),r=n(9985),l=n(1806),o=n(3460),i=n(9650),s=n(864),c=n.n(s),d=n(9090),u=n(611),h=n(196),p=n(5263),x=n(8911),m=n(5865),g=n(2518),f=n(2110),y=n(6446),A=n(9252),v=n(8076),j=n(2420),b=n(7392),w=n(1020),k=n(2143),C=n(3462),I=n(6600),S=n(5316),O=n(8533),$=n(9347),M=n(1675),q=n(8721),P=n(1112),R=n(7510),T=n(1330),_=n(579);function B(e){let{item:t,manageRedemption:n,handleOpenModal:l,setModalRedemptionId:o}=e;const[i,s]=(0,a.useState)(null),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(t.status),p=()=>{d(!1)},m=()=>{s(null)};return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(v.A,{tabIndex:t.id,children:[(0,_.jsx)(j.A,{children:t.id}),(0,_.jsx)(j.A,{children:t.name}),(0,_.jsx)(j.A,{children:1!==t.status&&2!==t.status?(0,_.jsx)(M.A,{variant:"filled",color:3===t.status?"success":"orange",children:3===t.status?"\u5df2\u4f7f\u7528":"\u672a\u77e5"}):(0,_.jsx)(q.A,{id:`switch-${t.id}`,checked:1===u,onChange:async()=>{const e=1===u?2:1,{success:a}=await n(t.id,"status",e);a&&h(e)}})}),(0,_.jsx)(j.A,{children:(0,r.X8)(t.quota)}),(0,_.jsx)(j.A,{children:(0,r.gA)(t.createTime)}),(0,_.jsx)(j.A,{children:t.redeemedTime?(0,r.gA)(t.redeemedTime):"\u5c1a\u672a\u5151\u6362"}),(0,_.jsx)(j.A,{children:(0,_.jsxs)(x.A,{direction:"row",spacing:1,children:[(0,_.jsx)(g.A,{variant:"contained",color:"primary",onClick:()=>{navigator.clipboard.writeText(t.key),(0,r.Te)("\u5df2\u590d\u5236\u5230\u526a\u8d34\u677f\uff01")},children:"\u590d\u5236"}),(0,_.jsx)(b.A,{onClick:e=>{s(e.currentTarget)},sx:{color:"rgb(99, 115, 129)"},children:(0,_.jsx)(P.A,{})})]})})]}),(0,_.jsxs)(w.Ay,{open:!!i,anchorEl:i,onClose:m,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[(0,_.jsxs)(k.A,{disabled:1!==t.status&&2!==t.status,onClick:()=>{m(),l(),o(t.id)},children:[(0,_.jsx)(R.A,{style:{marginRight:"16px"}}),"\u7f16\u8f91"]}),(0,_.jsxs)(k.A,{onClick:()=>{m(),d(!0)},sx:{color:"error.main"},children:[(0,_.jsx)(T.A,{style:{marginRight:"16px"}}),"\u5220\u9664"]})]}),(0,_.jsxs)(C.A,{open:c,onClose:p,children:[(0,_.jsx)(I.A,{children:"\u5220\u9664\u5151\u6362\u7801"}),(0,_.jsx)(S.A,{children:(0,_.jsxs)(O.A,{children:["\u662f\u5426\u5220\u9664\u5151\u6362\u7801 ",t.name,"\uff1f"]})}),(0,_.jsxs)($.A,{children:[(0,_.jsx)(g.A,{onClick:p,children:"\u5173\u95ed"}),(0,_.jsx)(g.A,{onClick:async()=>{m(),await n(t.id,"delete","")},sx:{color:"error.main"},autoFocus:!0,children:"\u5220\u9664"})]})]})]})}var F=n(4882);var W=()=>(0,_.jsx)(F.A,{children:(0,_.jsxs)(v.A,{children:[(0,_.jsx)(j.A,{children:"ID"}),(0,_.jsx)(j.A,{children:"\u540d\u79f0"}),(0,_.jsx)(j.A,{children:"\u72b6\u6001"}),(0,_.jsx)(j.A,{children:"\u989d\u5ea6"}),(0,_.jsx)(j.A,{children:"\u521b\u5efa\u65f6\u95f4"}),(0,_.jsx)(j.A,{children:"\u5151\u6362\u65f6\u95f4"}),(0,_.jsx)(j.A,{children:"\u64cd\u4f5c"})]})}),G=n(5098),L=n(3862),z=n(1736),E=n(1522),Q=n(3991),D=n(3033),V=n(3516),H=n(6240),N=n(9336),X=n(3193),U=n(9190),Y=n(4050),Z=n(1673),J=n(1787);const K=D.Ik().shape({is_edit:D.zM(),name:D.Yj().required("\u540d\u79f0 \u4e0d\u80fd\u4e3a\u7a7a"),quota:D.ai().min(0,"\u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e0"),count:D.ai().when("is_edit",{is:!1,then:D.ai().min(1,"\u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e1"),otherwise:D.ai()})}),ee={is_edit:!1,name:"",quota:1e5,count:1};var te=e=>{let{open:t,redemptiondId:n,onCancel:l,onOk:o}=e;const i=(0,H.A)(),[s,c]=(0,a.useState)(ee);return(0,a.useEffect)((()=>{n?(async()=>{let e=await L.n.get(`/api/redemption/${n}`);const{success:t,message:a,data:l}=e.data;t?(l.is_edit=!0,c(l)):(0,r.Qg)(a)})().then():c(ee)}),[n]),(0,_.jsxs)(C.A,{open:t,onClose:l,fullWidth:!0,maxWidth:"md",children:[(0,_.jsx)(I.A,{sx:{margin:"0px",fontWeight:700,lineHeight:"1.55556",padding:"24px",fontSize:"1.125rem"},children:n?"\u7f16\u8f91\u5151\u6362\u7801":"\u65b0\u5efa\u5151\u6362\u7801"}),(0,_.jsx)(N.A,{}),(0,_.jsx)(S.A,{children:(0,_.jsx)(V.l1,{initialValues:s,enableReinitialize:!0,validationSchema:K,onSubmit:async(e,t)=>{let a,{setErrors:l,setStatus:i,setSubmitting:s}=t;s(!0),a=e.is_edit?await L.n.put("/api/redemption/",{...e,id:parseInt(n)}):await L.n.post("/api/redemption/",e);const{success:c,message:d,data:u}=a.data;if(c){if(e.is_edit)(0,r.Te)("\u5151\u6362\u7801\u66f4\u65b0\u6210\u529f\uff01");else if((0,r.Te)("\u5151\u6362\u7801\u521b\u5efa\u6210\u529f\uff01"),u.length>1){let t="";for(let e=0;e<u.length;e++)t+=u[e]+"\n";(0,r.I9)(t,`${e.name}.txt`)}s(!1),i({success:!0}),o(!0)}else(0,r.Qg)(d),l({submit:d})},children:e=>{let{errors:t,handleBlur:n,handleChange:a,handleSubmit:o,touched:s,values:c,isSubmitting:d}=e;return(0,_.jsxs)("form",{noValidate:!0,onSubmit:o,children:[(0,_.jsxs)(X.A,{fullWidth:!0,error:Boolean(s.name&&t.name),sx:{...i.typography.otherInput},children:[(0,_.jsx)(U.A,{htmlFor:"channel-name-label",children:"\u540d\u79f0"}),(0,_.jsx)(Y.A,{id:"channel-name-label",label:"\u540d\u79f0",type:"text",value:c.name,name:"name",onBlur:n,onChange:a,inputProps:{autoComplete:"name"},"aria-describedby":"helper-text-channel-name-label"}),s.name&&t.name&&(0,_.jsx)(Z.A,{error:!0,id:"helper-tex-channel-name-label",children:t.name})]}),(0,_.jsxs)(X.A,{fullWidth:!0,error:Boolean(s.quota&&t.quota),sx:{...i.typography.otherInput},children:[(0,_.jsx)(U.A,{htmlFor:"channel-quota-label",children:"\u989d\u5ea6"}),(0,_.jsx)(Y.A,{id:"channel-quota-label",label:"\u989d\u5ea6",type:"number",value:c.quota,name:"quota",endAdornment:(0,_.jsx)(J.A,{position:"end",children:(0,r.t0)(c.quota)}),onBlur:n,onChange:a,"aria-describedby":"helper-text-channel-quota-label",disabled:c.unlimitedQuota}),s.quota&&t.quota&&(0,_.jsx)(Z.A,{error:!0,id:"helper-tex-channel-quota-label",children:t.quota})]}),!c.is_edit&&(0,_.jsxs)(X.A,{fullWidth:!0,error:Boolean(s.count&&t.count),sx:{...i.typography.otherInput},children:[(0,_.jsx)(U.A,{htmlFor:"channel-count-label",children:"\u6570\u91cf"}),(0,_.jsx)(Y.A,{id:"channel-count-label",label:"\u6570\u91cf",type:"number",value:c.count,name:"count",onBlur:n,onChange:a,"aria-describedby":"helper-text-channel-count-label"}),s.count&&t.count&&(0,_.jsx)(Z.A,{error:!0,id:"helper-tex-channel-count-label",children:t.count})]}),(0,_.jsxs)($.A,{children:[(0,_.jsx)(g.A,{onClick:l,children:"\u53d6\u6d88"}),(0,_.jsx)(g.A,{disableElevation:!0,disabled:d,type:"submit",variant:"contained",color:"primary",children:"\u63d0\u4ea4"})]})]})}})})]})};function ne(){const[e,t]=(0,a.useState)([]),[n,s]=(0,a.useState)(0),[v,j]=(0,a.useState)(!1),[b,w]=(0,a.useState)(""),[k,C]=(0,a.useState)(!1),[I,S]=(0,a.useState)(0),O=async n=>{j(!0);const a=await L.n.get(`/api/redemption/?p=${n}`),{success:l,message:o,data:i}=a.data;if(l)if(0===n)t(i);else{let a=[...e];a.splice(n*z.re,i.length,...i),t(a)}else(0,r.Qg)(o);j(!1)},$=async(e,t,n)=>{const a="/api/redemption/";let l,o={id:e};switch(t){case"delete":l=await L.n.delete(a+e);break;case"status":l=await L.n.put(a+"?withStatus=true",{...o,status:n})}const{success:i,message:s}=l.data;return i?((0,r.Te)("\u64cd\u4f5c\u6210\u529f\u5b8c\u6210\uff01"),"delete"===t&&await O(0)):(0,r.Qg)(s),l.data},M=async()=>{await O(0),s(0),w("")},q=e=>{S(e),C(!0)},P=()=>{C(!1),S(0)};return(0,a.useEffect)((()=>{O(0).then().catch((e=>{(0,r.Qg)(e)}))}),[]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(x.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[(0,_.jsx)(m.A,{variant:"h4",children:"\u5151\u6362"}),(0,_.jsx)(g.A,{variant:"contained",color:"primary",startIcon:(0,_.jsx)(E.A,{}),onClick:()=>q(0),children:"\u65b0\u5efa\u5151\u6362\u7801"})]}),(0,_.jsxs)(f.A,{children:[(0,_.jsx)(y.A,{component:"form",onSubmit:async e=>{if(e.preventDefault(),""===b)return await O(0),void s(0);j(!0);const n=await L.n.get(`/api/redemption/search?keyword=${b}`),{success:a,message:l,data:o}=n.data;a?(t(o),s(0)):(0,r.Qg)(l),j(!1)},noValidate:!0,children:(0,_.jsx)(G.A,{filterName:b,handleFilterName:e=>{w(e.target.value)},placeholder:"\u641c\u7d22\u5151\u6362\u7801\u7684ID\u548c\u540d\u79f0..."})}),(0,_.jsx)(p.A,{sx:{textAlign:"right",height:50,display:"flex",justifyContent:"space-between",p:e=>e.spacing(0,1,0,3)},children:(0,_.jsx)(A.A,{children:(0,_.jsx)(h.A,{variant:"outlined","aria-label":"outlined small primary button group",children:(0,_.jsx)(g.A,{onClick:M,startIcon:(0,_.jsx)(Q.A,{width:"18px"}),children:"\u5237\u65b0"})})})}),v&&(0,_.jsx)(u.A,{}),(0,_.jsx)(c(),{component:"div",children:(0,_.jsx)(i.A,{sx:{overflow:"unset"},children:(0,_.jsxs)(l.A,{sx:{minWidth:800},children:[(0,_.jsx)(W,{}),(0,_.jsx)(o.A,{children:e.slice(n*z.re,(n+1)*z.re).map((e=>(0,_.jsx)(B,{item:e,manageRedemption:$,handleOpenModal:q,setModalRedemptionId:S},e.id)))})]})})}),(0,_.jsx)(d.A,{page:n,component:"div",count:e.length+(e.length%z.re===0?1:0),rowsPerPage:z.re,onPageChange:(t,n)=>{(async()=>{n===Math.ceil(e.length/z.re)&&await O(n),s(n)})()},rowsPerPageOptions:[z.re]})]}),(0,_.jsx)(te,{open:k,onCancel:P,onOk:e=>{!0===e&&(P(),M())},redemptiondId:I})]})}},310:function(e,t,n){n.d(t,{X4:function(){return s},a:function(){return d},e$:function(){return c}});var a=n(6632),r=n(7040);function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,r.A)(e,t,n)}function o(e){if(e.type)return e;if("#"===e.charAt(0))return o(function(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,a.A)(9,e));let r,l=e.substring(t+1,e.length-1);if("color"===n){if(l=l.split(" "),r=l.shift(),4===l.length&&"/"===l[3].charAt(0)&&(l[3]=l[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,a.A)(10,r))}else l=l.split(",");return l=l.map((e=>parseFloat(e))),{type:n,values:l,colorSpace:r}}function i(e){const{type:t,colorSpace:n}=e;let{values:a}=e;return-1!==t.indexOf("rgb")?a=a.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(a[1]=`${a[1]}%`,a[2]=`${a[2]}%`),a=-1!==t.indexOf("color")?`${n} ${a.join(" ")}`:`${a.join(", ")}`,`${t}(${a})`}function s(e,t){return e=o(e),t=l(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,i(e)}function c(e,t){if(e=o(e),t=l(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return i(e)}function d(e,t){if(e=o(e),t=l(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return i(e)}}}]);
//# sourceMappingURL=224.4f528f11.chunk.js.map