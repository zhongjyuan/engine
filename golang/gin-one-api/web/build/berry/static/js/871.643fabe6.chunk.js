"use strict";(self.webpackChunkone_api_web=self.webpackChunkone_api_web||[]).push([[871],{8032:function(e,t,r){r.d(t,{p:function(){return n}});const n={1:{key:1,text:"OpenAI",value:1,color:"primary"},14:{key:14,text:"Anthropic Claude",value:14,color:"info"},3:{key:3,text:"Azure OpenAI",value:3,color:"orange"},11:{key:11,text:"Google PaLM2",value:11,color:"orange"},24:{key:24,text:"Google Gemini",value:24,color:"orange"},15:{key:15,text:"\u767e\u5ea6\u6587\u5fc3\u5343\u5e06",value:15,color:"default"},17:{key:17,text:"\u963f\u91cc\u901a\u4e49\u5343\u95ee",value:17,color:"default"},18:{key:18,text:"\u8baf\u98de\u661f\u706b\u8ba4\u77e5",value:18,color:"default"},16:{key:16,text:"\u667a\u8c31 ChatGLM",value:16,color:"default"},19:{key:19,text:"360 \u667a\u8111",value:19,color:"default"},25:{key:25,text:"Moonshot AI",value:19,color:"default"},23:{key:23,text:"\u817e\u8baf\u6df7\u5143",value:23,color:"default"},8:{key:8,text:"\u81ea\u5b9a\u4e49\u6e20\u9053",value:8,color:"primary"},22:{key:22,text:"\u77e5\u8bc6\u5e93\uff1aFastGPT",value:22,color:"default"},21:{key:21,text:"\u77e5\u8bc6\u5e93\uff1aAI Proxy",value:21,color:"purple"},20:{key:20,text:"\u4ee3\u7406\uff1aOpenRouter",value:20,color:"primary"},2:{key:2,text:"\u4ee3\u7406\uff1aAPI2D",value:2,color:"primary"},5:{key:5,text:"\u4ee3\u7406\uff1aOpenAI-SB",value:5,color:"primary"},7:{key:7,text:"\u4ee3\u7406\uff1aOhMyGPT",value:7,color:"primary"},10:{key:10,text:"\u4ee3\u7406\uff1aAI Proxy",value:10,color:"primary"},4:{key:4,text:"\u4ee3\u7406\uff1aCloseAI",value:4,color:"primary"},6:{key:6,text:"\u4ee3\u7406\uff1aOpenAI Max",value:6,color:"primary"},9:{key:9,text:"\u4ee3\u7406\uff1aAI.LS",value:9,color:"primary"},12:{key:12,text:"\u4ee3\u7406\uff1aAPI2GPT",value:12,color:"primary"},13:{key:13,text:"\u4ee3\u7406\uff1aAIGC2D",value:13,color:"primary"}}},1736:function(e,t,r){r.d(t,{re:function(){return n}});r(1838);const n=10;r(8032)},1675:function(e,t,r){var n=r(5043),l=r(6446),a=r(6240),o=r(4535),i=r(310),s=r(579);const c=(0,n.forwardRef)(((e,t)=>{let{children:r,color:n="default",variant:o="soft",startIcon:i,endIcon:c,sx:u,...p}=e;const m=(0,a.A)(),h={width:16,height:16,"& svg, img":{width:1,height:1,objectFit:"cover"}};return(0,s.jsxs)(d,{ref:t,component:"span",ownerState:{color:n,variant:o},sx:{...i&&{pl:.75},...c&&{pr:.75},...u},theme:m,...p,children:[i&&(0,s.jsxs)(l.A,{sx:{mr:.75,...h},children:[" ",i," "]}),r,c&&(0,s.jsxs)(l.A,{sx:{ml:.75,...h},children:[" ",c," "]})]})}));t.A=c;const d=(0,o.Ay)(l.A)((e=>{var t,r,n,l,a;let{theme:o,ownerState:s}=e;const c="filled"===s.variant,d="outlined"===s.variant,u="soft"===s.variant,p="ghost"===s.variant,m={..."default"===s.color&&{...c&&{color:o.palette.grey[300],backgroundColor:o.palette.text.primary},...d&&{color:o.palette.grey[500],border:`2px solid ${o.palette.grey[500]}`},...u&&{color:o.palette.text.secondary,backgroundColor:(0,i.X4)(o.palette.grey[500],.16)}}},h={..."default"!==s.color&&{...c&&{color:o.palette.background.paper,backgroundColor:null===(t=o.palette[s.color])||void 0===t?void 0:t.main},...d&&{backgroundColor:"transparent",color:null===(r=o.palette[s.color])||void 0===r?void 0:r.main,border:`2px solid ${null===(n=o.palette[s.color])||void 0===n?void 0:n.main}`},...u&&{color:o.palette[s.color].dark,backgroundColor:(0,i.X4)(null===(l=o.palette[s.color])||void 0===l?void 0:l.main,.16)},...p&&{color:null===(a=o.palette[s.color])||void 0===a?void 0:a.main}}};return{height:24,minWidth:24,lineHeight:0,borderRadius:6,cursor:"default",alignItems:"center",whiteSpace:"nowrap",display:"inline-flex",justifyContent:"center",padding:o.spacing(0,.75),fontSize:o.typography.pxToRem(12),fontWeight:o.typography.fontWeightBold,transition:o.transitions.create("all",{duration:o.transitions.duration.shorter}),...m,...h}}))},7327:function(e,t,r){r.r(t),r.d(t,{default:function(){return J}});var n=r(5043),l=r(9985),a=r(1806),o=r(3460),i=r(9650),s=r(864),c=r.n(s),d=r(9090),u=r(611),p=r(196),m=r(5263),h=r(8911),x=r(5865),A=r(2110),v=r(6446),f=r(9252),g=r(2518),y=r(8076),j=r(2420),b=r(1675);var k={0:{value:"0",text:"\u5168\u90e8",color:""},1:{value:"1",text:"\u5145\u503c",color:"primary"},2:{value:"2",text:"\u6d88\u8d39",color:"orange"},3:{value:"3",text:"\u7ba1\u7406",color:"default"},4:{value:"4",text:"\u7cfb\u7edf",color:"secondary"}},I=r(579);function w(e){const t=k[e];return t?(0,I.jsxs)(b.A,{variant:"filled",color:t.color,children:[" ",t.text," "]}):(0,I.jsxs)(b.A,{variant:"filled",color:"error",children:[" ","\u672a\u77e5"," "]})}function C(e){let{item:t,userIsAdmin:r}=e;return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(y.A,{tabIndex:t.id,children:[(0,I.jsx)(j.A,{children:(0,l.gA)(t.createTime)}),r&&(0,I.jsx)(j.A,{children:t.channelId||""}),r&&(0,I.jsx)(j.A,{children:(0,I.jsx)(b.A,{color:"default",variant:"outlined",children:t.userName})}),(0,I.jsx)(j.A,{children:t.tokenName&&(0,I.jsx)(b.A,{color:"default",variant:"soft",children:t.tokenName})}),(0,I.jsx)(j.A,{children:w(t.type)}),(0,I.jsx)(j.A,{children:t.modelName&&(0,I.jsx)(b.A,{color:"primary",variant:"outlined",children:t.modelName})}),(0,I.jsx)(j.A,{children:t.promptTokens||""}),(0,I.jsx)(j.A,{children:t.completionTokens||""}),(0,I.jsx)(j.A,{children:t.quota?(0,l.X8)(t.quota,6):""}),(0,I.jsx)(j.A,{children:t.content})]})})}var N=r(4882);var T=e=>{let{userIsAdmin:t}=e;return(0,I.jsx)(N.A,{children:(0,I.jsxs)(y.A,{children:[(0,I.jsx)(j.A,{children:"\u65f6\u95f4"}),t&&(0,I.jsx)(j.A,{children:"\u6e20\u9053"}),t&&(0,I.jsx)(j.A,{children:"\u7528\u6237"}),(0,I.jsx)(j.A,{children:"\u4ee4\u724c"}),(0,I.jsx)(j.A,{children:"\u7c7b\u578b"}),(0,I.jsx)(j.A,{children:"\u6a21\u578b"}),(0,I.jsx)(j.A,{children:"\u63d0\u793a"}),(0,I.jsx)(j.A,{children:"\u8865\u5168"}),(0,I.jsx)(j.A,{children:"\u989d\u5ea6"}),(0,I.jsx)(j.A,{children:"\u8be6\u60c5"})]})})},$=r(6240),z=r(6671),M=(0,r(7391).A)("brand-github-copilot","IconBrandGithubCopilot",[["path",{d:"M4 18v-5.5c0 -.667 .167 -1.333 .5 -2",key:"svg-0"}],["path",{d:"M12 7.5c0 -1 -.01 -4.07 -4 -3.5c-3.5 .5 -4 2.5 -4 3.5c0 1.5 0 4 3 4c4 0 5 -2.5 5 -4z",key:"svg-1"}],["path",{d:"M4 12c-1.333 .667 -2 1.333 -2 2c0 1 0 3 1.5 4c3 2 6.5 3 8.5 3s5.499 -1 8.5 -3c1.5 -1 1.5 -3 1.5 -4c0 -.667 -.667 -1.333 -2 -2",key:"svg-2"}],["path",{d:"M20 18v-5.5c0 -.667 -.167 -1.333 -.5 -2",key:"svg-3"}],["path",{d:"M12 7.5l0 -.297l.01 -.269l.027 -.298l.013 -.105l.033 -.215c.014 -.073 .029 -.146 .046 -.22l.06 -.223c.336 -1.118 1.262 -2.237 3.808 -1.873c2.838 .405 3.703 1.797 3.93 2.842l.036 .204c0 .033 .01 .066 .013 .098l.016 .185l0 .171l0 .49l-.015 .394l-.02 .271c-.122 1.366 -.655 2.845 -2.962 2.845c-3.256 0 -4.524 -1.656 -4.883 -3.081l-.053 -.242a3.865 3.865 0 0 1 -.036 -.235l-.021 -.227a3.518 3.518 0 0 1 -.007 -.215z",key:"svg-4"}],["path",{d:"M10 15v2",key:"svg-5"}],["path",{d:"M14 15v2",key:"svg-6"}]]),O=r(5267),F=r(7633),P=r(3193),S=r(9190),R=r(4050),q=r(1787),W=r(5174),G=r(2143),B=r(8390),D=r(4061),L=r(9302),_=r(446),H=r.n(_);function E(e){let{filterName:t,handleFilterName:r,userIsAdmin:n}=e;const l=(0,$.A)().palette.grey[500];return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(h.A,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2,md:4},padding:"24px",paddingBottom:"0px",children:[(0,I.jsxs)(P.A,{children:[(0,I.jsx)(S.A,{htmlFor:"channel-token_name-label",children:"\u4ee4\u724c\u540d\u79f0"}),(0,I.jsx)(R.A,{id:"tokenName",name:"tokenName",sx:{minWidth:"100%"},label:"\u4ee4\u724c\u540d\u79f0",value:t.tokenName,onChange:r,placeholder:"\u4ee4\u724c\u540d\u79f0",startAdornment:(0,I.jsx)(q.A,{position:"start",children:(0,I.jsx)(z.A,{stroke:1.5,size:"20px",color:l})})})]}),(0,I.jsxs)(P.A,{children:[(0,I.jsx)(S.A,{htmlFor:"channel-model_name-label",children:"\u6a21\u578b\u540d\u79f0"}),(0,I.jsx)(R.A,{id:"modelName",name:"modelName",sx:{minWidth:"100%"},label:"\u6a21\u578b\u540d\u79f0",value:t.modelName,onChange:r,placeholder:"\u6a21\u578b\u540d\u79f0",startAdornment:(0,I.jsx)(q.A,{position:"start",children:(0,I.jsx)(M,{stroke:1.5,size:"20px",color:l})})})]}),(0,I.jsx)(P.A,{children:(0,I.jsx)(B.$,{dateAdapter:L.R,adapterLocale:"zh-cn",children:(0,I.jsx)(D.K,{label:"\u8d77\u59cb\u65f6\u95f4",ampm:!1,name:"startTimestamp",value:0===t.startTimestamp?null:H().unix(t.startTimestamp),onChange:e=>{r(null!==e?{target:{name:"startTimestamp",value:e.unix()}}:{target:{name:"startTimestamp",value:0}})},slotProps:{actionBar:{actions:["clear","today","accept"]}}})})}),(0,I.jsx)(P.A,{children:(0,I.jsx)(B.$,{dateAdapter:L.R,adapterLocale:"zh-cn",children:(0,I.jsx)(D.K,{label:"\u7ed3\u675f\u65f6\u95f4",name:"endTimestamp",ampm:!1,value:0===t.endTimestamp?null:H().unix(t.endTimestamp),onChange:e=>{r(null!==e?{target:{name:"endTimestamp",value:e.unix()}}:{target:{name:"endTimestamp",value:0}})},slotProps:{actionBar:{actions:["clear","today","accept"]}}})})})]}),(0,I.jsxs)(h.A,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2,md:4},padding:"24px",children:[n&&(0,I.jsxs)(P.A,{children:[(0,I.jsx)(S.A,{htmlFor:"channel-channel-label",children:"\u6e20\u9053ID"}),(0,I.jsx)(R.A,{id:"channelId",name:"channelId",sx:{minWidth:"100%"},label:"\u6e20\u9053ID",value:t.channelId,onChange:r,placeholder:"\u6e20\u9053ID",startAdornment:(0,I.jsx)(q.A,{position:"start",children:(0,I.jsx)(O.A,{stroke:1.5,size:"20px",color:l})})})]}),n&&(0,I.jsxs)(P.A,{children:[(0,I.jsx)(S.A,{htmlFor:"channel-username-label",children:"\u7528\u6237\u540d\u79f0"}),(0,I.jsx)(R.A,{id:"userName",name:"userName",sx:{minWidth:"100%"},label:"\u7528\u6237\u540d\u79f0",value:t.userName,onChange:r,placeholder:"\u7528\u6237\u540d\u79f0",startAdornment:(0,I.jsx)(q.A,{position:"start",children:(0,I.jsx)(F.A,{stroke:1.5,size:"20px",color:l})})})]}),(0,I.jsxs)(P.A,{sx:{minWidth:"22%"},children:[(0,I.jsx)(S.A,{htmlFor:"channel-type-label",children:"\u7c7b\u578b"}),(0,I.jsx)(W.A,{id:"channel-type-label",label:"\u7c7b\u578b",value:t.type,name:"type",onChange:r,sx:{minWidth:"100%"},MenuProps:{PaperProps:{style:{maxHeight:200}}},children:Object.values(k).map((e=>(0,I.jsx)(G.A,{value:e.value,children:e.text},e.value)))})]})]})]})}r(6484);var X=r(3862),K=r(1736),Q=r(3991),V=r(8302);function J(){const e={p:0,userName:"",tokenName:"",modelName:"",startTimestamp:0,endTimestamp:(new Date).getTime()/1e3+3600,type:0,channelId:""},[t,r]=(0,n.useState)([]),[s,y]=(0,n.useState)(0),[j,b]=(0,n.useState)(!1),[k,w]=(0,n.useState)(e),[N,$]=(0,n.useState)(!0),z=(0,l.qc)(),M=async e=>{b(!0);const n=z?"/api/log/":"/api/log/self/",a=k;a.p=e,z||(delete a.userName,delete a.channelId);const o=await X.n.get(n,{params:a}),{success:i,message:s,data:c}=o.data;if(i)if(0===e)r(c);else{let n=[...t];n.splice(e*K.re,c.length,...c),r(n)}else(0,l.Qg)(s);b(!1)},O=async e=>{e.preventDefault(),await M(0),y(0)};return(0,n.useEffect)((()=>{w(e),y(0),M(0).then().catch((e=>{(0,l.Qg)(e)})),$(!1)}),[N]),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(h.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:(0,I.jsx)(x.A,{variant:"h4",children:"\u65e5\u5fd7"})}),(0,I.jsxs)(A.A,{children:[(0,I.jsx)(v.A,{component:"form",onSubmit:O,noValidate:!0,children:(0,I.jsx)(E,{filterName:k,handleFilterName:e=>{w({...k,[e.target.name]:e.target.value})},userIsAdmin:z})}),(0,I.jsx)(m.A,{sx:{textAlign:"right",height:50,display:"flex",justifyContent:"space-between",p:e=>e.spacing(0,1,0,3)},children:(0,I.jsx)(f.A,{children:(0,I.jsxs)(p.A,{variant:"outlined","aria-label":"outlined small primary button group",children:[(0,I.jsx)(g.A,{onClick:()=>{$(!0)},startIcon:(0,I.jsx)(Q.A,{width:"18px"}),children:"\u5237\u65b0/\u6e05\u9664\u641c\u7d22\u6761\u4ef6"}),(0,I.jsx)(g.A,{onClick:O,startIcon:(0,I.jsx)(V.A,{width:"18px"}),children:"\u641c\u7d22"})]})})}),j&&(0,I.jsx)(u.A,{}),(0,I.jsx)(c(),{component:"div",children:(0,I.jsx)(i.A,{sx:{overflow:"unset"},children:(0,I.jsxs)(a.A,{sx:{minWidth:800},children:[(0,I.jsx)(T,{userIsAdmin:z}),(0,I.jsx)(o.A,{children:t.slice(s*K.re,(s+1)*K.re).map(((e,t)=>(0,I.jsx)(C,{item:e,userIsAdmin:z},`${e.id}_${t}`)))})]})})}),(0,I.jsx)(d.A,{page:s,component:"div",count:t.length+(t.length%K.re===0?1:0),rowsPerPage:K.re,onPageChange:(e,r)=>{(async()=>{r===Math.ceil(t.length/K.re)&&await M(r),y(r)})()},rowsPerPageOptions:[K.re]})]})]})}},1673:function(e,t,r){r.d(t,{A:function(){return j}});var n=r(8587),l=r(8168),a=r(5043),o=r(8387),i=r(8606),s=r(4827),c=r(5213),d=r(4535),u=r(6803),p=r(7056),m=r(2400);function h(e){return(0,m.Ay)("MuiFormHelperText",e)}var x,A=(0,p.A)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),v=r(2876),f=r(579);const g=["children","className","component","disabled","error","filled","focused","margin","required","variant"],y=(0,d.Ay)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.size&&t[`size${(0,u.A)(r.size)}`],r.contained&&t.contained,r.filled&&t.filled]}})((e=>{let{theme:t,ownerState:r}=e;return(0,l.A)({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${A.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${A.error}`]:{color:(t.vars||t).palette.error.main}},"small"===r.size&&{marginTop:4},r.contained&&{marginLeft:14,marginRight:14})}));var j=a.forwardRef((function(e,t){const r=(0,v.A)({props:e,name:"MuiFormHelperText"}),{children:a,className:d,component:p="p"}=r,m=(0,n.A)(r,g),A=(0,c.A)(),j=(0,s.A)({props:r,muiFormControl:A,states:["variant","size","disabled","error","filled","focused","required"]}),b=(0,l.A)({},r,{component:p,contained:"filled"===j.variant||"outlined"===j.variant,variant:j.variant,size:j.size,disabled:j.disabled,error:j.error,filled:j.filled,focused:j.focused,required:j.required}),k=(e=>{const{classes:t,contained:r,size:n,disabled:l,error:a,filled:o,focused:s,required:c}=e,d={root:["root",l&&"disabled",a&&"error",n&&`size${(0,u.A)(n)}`,r&&"contained",s&&"focused",o&&"filled",c&&"required"]};return(0,i.A)(d,h,t)})(b);return(0,f.jsx)(y,(0,l.A)({as:p,ownerState:b,className:(0,o.A)(k.root,d),ref:t},m,{children:" "===a?x||(x=(0,f.jsx)("span",{className:"notranslate",children:"\u200b"})):a}))}))},310:function(e,t,r){r.d(t,{X4:function(){return s},a:function(){return d},e$:function(){return c}});var n=r(6632),l=r(7040);function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,l.A)(e,t,r)}function o(e){if(e.type)return e;if("#"===e.charAt(0))return o(function(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&1===r[0].length&&(r=r.map((e=>e+e))),r?`rgb${4===r.length?"a":""}(${r.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const t=e.indexOf("("),r=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(r))throw new Error((0,n.A)(9,e));let l,a=e.substring(t+1,e.length-1);if("color"===r){if(a=a.split(" "),l=a.shift(),4===a.length&&"/"===a[3].charAt(0)&&(a[3]=a[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(l))throw new Error((0,n.A)(10,l))}else a=a.split(",");return a=a.map((e=>parseFloat(e))),{type:r,values:a,colorSpace:l}}function i(e){const{type:t,colorSpace:r}=e;let{values:n}=e;return-1!==t.indexOf("rgb")?n=n.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),n=-1!==t.indexOf("color")?`${r} ${n.join(" ")}`:`${n.join(", ")}`,`${t}(${n})`}function s(e,t){return e=o(e),t=a(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,i(e)}function c(e,t){if(e=o(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let r=0;r<3;r+=1)e.values[r]*=1-t;return i(e)}function d(e,t){if(e=o(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(-1!==e.type.indexOf("color"))for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return i(e)}}}]);
//# sourceMappingURL=871.643fabe6.chunk.js.map