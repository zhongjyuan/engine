"use strict";(self.webpackChunkone_api_web=self.webpackChunkone_api_web||[]).push([[4],{7473:function(e,t,i){i.d(t,{A:function(){return j}});var n=i(1045),a=i(6446),s=i(310),r=i(2110),o=i(5043);var c=i.p+"static/media/shape-avatar.096ea8015d2d14ba4ce707d949a97823.svg",l=i.p+"static/media/cover.ce8466cd4be184bb082b.jpg",d=i(163),h=i(5173),x=i.n(h),u=i(579);const m=(0,o.forwardRef)(((e,t)=>{let{src:i,sx:n,...s}=e;return(0,u.jsx)(a.A,{component:"span",className:"svg-color",ref:t,sx:{width:24,height:24,display:"inline-block",bgcolor:"currentColor",mask:`url(${i}) no-repeat center / contain`,WebkitMask:`url(${i}) no-repeat center / contain`,...n},...s})}));m.propTypes={src:x().string,sx:x().object};var p=m;function j(e){let{children:t}=e;const i=(0,u.jsx)(p,{color:"paper",src:c,sx:{width:"100%",height:62,zIndex:10,bottom:-26,position:"absolute",color:"background.paper"}}),o=(0,u.jsx)(n.A,{src:d.A,sx:{zIndex:11,width:64,height:64,position:"absolute",alignItems:"center",marginLeft:"auto",marginRight:"auto",left:0,right:0,bottom:e=>e.spacing(-4)}}),h=(0,u.jsx)(a.A,{component:"img",src:l,sx:{top:0,width:1,height:1,objectFit:"cover",position:"absolute"}});return(0,u.jsxs)(r.A,{children:[(0,u.jsxs)(a.A,{sx:{position:"relative","&:after":{top:0,content:"''",width:"100%",height:"100%",position:"absolute",bgcolor:e=>(0,s.X4)(e.palette.primary.main,.42)},pt:{xs:"calc(100% / 3)",sm:"calc(100% / 4.66)"}},children:[i,o,h]}),(0,u.jsx)(a.A,{sx:{p:e=>e.spacing(4,3,3,3)},children:t})]})}},6585:function(e,t,i){i.r(t),i.d(t,{default:function(){return T}});var n=i(5043),a=i(8903),s=i(5865),r=i(3440),o=i(4535),c=i(6240),l=i(6446),d=i(2019),h=i(2330),x=i(2110),u=i(6494),m=i(8185),p=i(579);var j=()=>(0,p.jsx)(x.A,{children:(0,p.jsx)(u.A,{children:(0,p.jsxs)(a.Ay,{container:!0,direction:"column",children:[(0,p.jsx)(a.Ay,{item:!0,children:(0,p.jsxs)(a.Ay,{container:!0,justifyContent:"space-between",children:[(0,p.jsx)(a.Ay,{item:!0,children:(0,p.jsx)(m.A,{variant:"rectangular",width:44,height:44})}),(0,p.jsx)(a.Ay,{item:!0,children:(0,p.jsx)(m.A,{variant:"rectangular",width:34,height:34})})]})}),(0,p.jsx)(a.Ay,{item:!0,children:(0,p.jsx)(m.A,{variant:"rectangular",sx:{my:2},height:40})}),(0,p.jsx)(a.Ay,{item:!0,children:(0,p.jsx)(m.A,{variant:"rectangular",height:30})})]})})});const g=(0,o.Ay)(h.A)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.primary.dark,color:"#fff",overflow:"hidden",position:"relative","&>div":{position:"relative",zIndex:5},"&:after":{content:'""',position:"absolute",width:210,height:210,background:t.palette.primary[800],borderRadius:"50%",zIndex:1,top:-85,right:-95,[t.breakpoints.down("sm")]:{top:-105,right:-140}},"&:before":{content:'""',position:"absolute",zIndex:1,width:210,height:210,background:t.palette.primary[800],borderRadius:"50%",top:-125,right:-15,opacity:.5,[t.breakpoints.down("sm")]:{top:-155,right:-70}}}}));var y=e=>{let{isLoading:t,title:i,chartData:n,todayValue:r}=e;const o=(0,c.A)();return(0,p.jsx)(p.Fragment,{children:t?(0,p.jsx)(j,{}):(0,p.jsx)(g,{border:!1,content:!1,children:(0,p.jsx)(l.A,{sx:{p:2.25},children:(0,p.jsx)(a.Ay,{container:!0,direction:"column",children:(0,p.jsx)(a.Ay,{item:!0,sx:{mb:.75},children:(0,p.jsxs)(a.Ay,{container:!0,alignItems:"center",children:[(0,p.jsx)(a.Ay,{item:!0,xs:6,children:(0,p.jsxs)(a.Ay,{container:!0,alignItems:"center",children:[(0,p.jsx)(a.Ay,{item:!0,children:(0,p.jsx)(s.A,{sx:{fontSize:"2.125rem",fontWeight:500,mr:1,mt:1.75,mb:.75},children:r||"0"})}),(0,p.jsx)(a.Ay,{item:!0}),(0,p.jsx)(a.Ay,{item:!0,xs:12,children:(0,p.jsx)(s.A,{sx:{fontSize:"1rem",fontWeight:500,color:o.palette.primary[200]},children:i})})]})}),(0,p.jsx)(a.Ay,{item:!0,xs:6,children:n?(0,p.jsx)(d.A,{...n}):(0,p.jsx)(s.A,{sx:{fontSize:"1rem",fontWeight:500,color:o.palette.primary[200]},children:"\u65e0\u6570\u636e"})})]})})})})})})};var A=()=>(0,p.jsx)(x.A,{children:(0,p.jsx)(u.A,{children:(0,p.jsxs)(a.Ay,{container:!0,spacing:r.iL,children:[(0,p.jsx)(a.Ay,{item:!0,xs:12,children:(0,p.jsxs)(a.Ay,{container:!0,alignItems:"center",justifyContent:"space-between",spacing:r.iL,children:[(0,p.jsx)(a.Ay,{item:!0,xs:!0,zeroMinWidth:!0,children:(0,p.jsxs)(a.Ay,{container:!0,spacing:1,children:[(0,p.jsx)(a.Ay,{item:!0,xs:12,children:(0,p.jsx)(m.A,{variant:"text"})}),(0,p.jsx)(a.Ay,{item:!0,xs:12,children:(0,p.jsx)(m.A,{variant:"rectangular",height:20})})]})}),(0,p.jsx)(a.Ay,{item:!0,children:(0,p.jsx)(m.A,{variant:"rectangular",height:50,width:80})})]})}),(0,p.jsx)(a.Ay,{item:!0,xs:12,children:(0,p.jsx)(m.A,{variant:"rectangular",height:530})})]})})});var f=e=>{let{isLoading:t,chartDatas:i}=e;return b.options.xaxis.categories=i.xaxis,b.series=i.data,(0,p.jsx)(p.Fragment,{children:t?(0,p.jsx)(A,{}):(0,p.jsx)(h.A,{children:(0,p.jsxs)(a.Ay,{container:!0,spacing:r.iL,children:[(0,p.jsx)(a.Ay,{item:!0,xs:12,children:(0,p.jsx)(a.Ay,{container:!0,alignItems:"center",justifyContent:"space-between",children:(0,p.jsx)(a.Ay,{item:!0,children:(0,p.jsx)(s.A,{variant:"h3",children:"\u7edf\u8ba1"})})})}),(0,p.jsx)(a.Ay,{item:!0,xs:12,children:b.series?(0,p.jsx)(d.A,{...b}):(0,p.jsx)(l.A,{sx:{minHeight:"490px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,p.jsx)(s.A,{variant:"h3",color:"#697586",children:"\u6682\u65e0\u6570\u636e"})})})]})})})};const b={height:480,type:"bar",options:{colors:["#008FFB","#00E396","#FEB019","#FF4560","#775DD0","#55efc4","#81ecec","#74b9ff","#a29bfe","#00b894","#00cec9","#0984e3","#6c5ce7","#ffeaa7","#fab1a0","#ff7675","#fd79a8","#fdcb6e","#e17055","#d63031","#e84393"],chart:{id:"bar-chart",stacked:!0,toolbar:{show:!0},zoom:{enabled:!0}},responsive:[{breakpoint:480,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],plotOptions:{bar:{horizontal:!1,columnWidth:"50%"}},xaxis:{type:"category",categories:[]},legend:{show:!0,fontSize:"14px",fontFamily:"'Roboto', sans-serif",position:"bottom",offsetX:20,labels:{useSeriesColors:!1},markers:{width:16,height:16,radius:5},itemMargin:{horizontal:15,vertical:8}},fill:{type:"solid"},dataLabels:{enabled:!1},grid:{show:!0},tooltip:{theme:"dark",fixed:{enabled:!1},y:{formatter:function(e){return"$"+e}},marker:{show:!1}}},series:[]};function v(){const e=[];for(let t=6;t>=0;t--){const i=new Date;i.setDate(i.getDate()-t);const n=""+(i.getMonth()+1),a=""+i.getDate(),s=[i.getFullYear(),n.padStart(2,"0"),a.padStart(2,"0")].join("-");e.push(s)}return e}function k(e,t){const i=e.map((e=>e.date)),n=e.map((e=>e.value));return{series:[{data:n}],type:"line",height:90,options:{chart:{sparkline:{enabled:!0}},dataLabels:{enabled:!1},colors:["#fff"],fill:{type:"solid",opacity:1},stroke:{curve:"smooth",width:3},xaxis:{categories:i,labels:{show:!1},min:i[0],max:i[i.length-1]},yaxis:{min:Math.min(...n),max:Math.max(...n),labels:{show:!1}},tooltip:{theme:"dark",fixed:{enabled:!1},x:{format:"yyyy-MM-dd"},y:{formatter:function(e){return e+` ${t}`},title:{formatter:function(){return""}}},marker:{show:!1}}}}}var w=i(3862),D=i(9985),C=i(7473);var T=()=>{const[e,t]=(0,n.useState)(!0),[i,o]=(0,n.useState)([]),[c,l]=(0,n.useState)(null),[d,h]=(0,n.useState)(null),[x,u]=(0,n.useState)(null),[m,j]=(0,n.useState)([]),g=async()=>{const e=await w.n.get("/api/user/dashboard"),{success:i,message:n,data:a}=e.data;if(i){if(a){let e=function(e){let t=e.reduce(((e,t)=>(e[t.Day]||(e[t.Day]={date:t.Day,RequestCount:0,Quota:0,PromptTokens:0,CompletionTokens:0}),e[t.Day].RequestCount+=t.RequestCount,e[t.Day].Quota+=t.Quota,e[t.Day].PromptTokens+=t.PromptTokens,e[t.Day].CompletionTokens+=t.CompletionTokens,e)),{});return v().map((e=>t[e]?t[e]:{date:e,RequestCount:0,Quota:0,PromptTokens:0,CompletionTokens:0}))}(a);l(L(e,"RequestCount")),h(L(e,"Quota")),u(L(e,"PromptTokens")),o(function(e){const t=v(),i=[],n=new Map;for(const a of e){if(!n.has(a.ModelName)){const e={name:a.ModelName,data:new Array(7)};n.set(a.ModelName,e),i.push(e)}const e=t.indexOf(a.Day);-1!==e&&(n.get(a.ModelName).data[e]=(0,D.x0)(a.Quota,3))}for(const a of i)for(let e=0;e<7;e++)void 0===a.data[e]&&(a.data[e]=0);return{data:i,xaxis:t}}(a))}}else(0,D.Qg)(n);t(!1)};return(0,n.useEffect)((()=>{g(),(async()=>{let e=await w.n.get("/api/user/self");const{success:t,message:i,data:n}=e.data;t?j(n):(0,D.Qg)(i)})()}),[]),(0,p.jsxs)(a.Ay,{container:!0,spacing:r.iL,children:[(0,p.jsx)(a.Ay,{item:!0,xs:12,children:(0,p.jsxs)(a.Ay,{container:!0,spacing:r.iL,children:[(0,p.jsx)(a.Ay,{item:!0,lg:4,xs:12,children:(0,p.jsx)(y,{isLoading:e,title:"\u4eca\u65e5\u8bf7\u6c42\u91cf",chartData:null===c||void 0===c?void 0:c.chartData,todayValue:null===c||void 0===c?void 0:c.todayValue})}),(0,p.jsx)(a.Ay,{item:!0,lg:4,xs:12,children:(0,p.jsx)(y,{isLoading:e,title:"\u4eca\u65e5\u6d88\u8d39",chartData:null===d||void 0===d?void 0:d.chartData,todayValue:null===d||void 0===d?void 0:d.todayValue})}),(0,p.jsx)(a.Ay,{item:!0,lg:4,xs:12,children:(0,p.jsx)(y,{isLoading:e,title:"\u4eca\u65e5 token",chartData:null===x||void 0===x?void 0:x.chartData,todayValue:null===x||void 0===x?void 0:x.todayValue})})]})}),(0,p.jsx)(a.Ay,{item:!0,xs:12,children:(0,p.jsxs)(a.Ay,{container:!0,spacing:r.iL,children:[(0,p.jsx)(a.Ay,{item:!0,lg:8,xs:12,children:(0,p.jsx)(f,{isLoading:e,chartDatas:i})}),(0,p.jsx)(a.Ay,{item:!0,lg:4,xs:12,children:(0,p.jsx)(C.A,{children:(0,p.jsxs)(a.Ay,{container:!0,spacing:r.iL,justifyContent:"center",alignItems:"center",paddingTop:"20px",children:[(0,p.jsx)(a.Ay,{item:!0,xs:4,children:(0,p.jsx)(s.A,{variant:"h4",children:"\u4f59\u989d\uff1a"})}),(0,p.jsx)(a.Ay,{item:!0,xs:8,children:(0,p.jsxs)(s.A,{variant:"h3",children:[" ",null!==m&&void 0!==m&&m.quota?"$"+(0,D.x0)(m.quota):"\u672a\u77e5"]})}),(0,p.jsx)(a.Ay,{item:!0,xs:4,children:(0,p.jsx)(s.A,{variant:"h4",children:"\u5df2\u4f7f\u7528\uff1a"})}),(0,p.jsx)(a.Ay,{item:!0,xs:8,children:(0,p.jsxs)(s.A,{variant:"h3",children:[" ",null!==m&&void 0!==m&&m.usedQuota?"$"+(0,D.x0)(m.usedQuota):"\u672a\u77e5"]})}),(0,p.jsx)(a.Ay,{item:!0,xs:4,children:(0,p.jsx)(s.A,{variant:"h4",children:"\u8c03\u7528\u6b21\u6570\uff1a"})}),(0,p.jsx)(a.Ay,{item:!0,xs:8,children:(0,p.jsxs)(s.A,{variant:"h3",children:[" ",(null===m||void 0===m?void 0:m.requestCount)||"\u672a\u77e5"]})})]})})})]})})]})};function L(e,t){let i=0,n=null;const a=e.length-1;let s=e.map(((e,n)=>{let s={date:e.date,value:e[t]};switch(t){case"Quota":s.value=(0,D.x0)(e.Quota,3);break;case"PromptTokens":s.value+=e.CompletionTokens}return n==a&&(i=s.value),s}));switch(t){case"RequestCount":n=k(s,"\u6b21"),i=(0,D.kT)(i);break;case"Quota":n=k(s,"\u7f8e\u5143"),i="$"+(0,D.kT)(i);break;case"PromptTokens":n=k(s,""),i=(0,D.kT)(i)}return{chartData:n,todayValue:i}}}}]);
//# sourceMappingURL=4.22eb4f70.chunk.js.map