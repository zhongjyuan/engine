"use strict";(self.webpackChunkone_api_web=self.webpackChunkone_api_web||[]).push([[101],{8032:function(e,t,n){n.d(t,{p:function(){return a}});const a={1:{key:1,text:"OpenAI",value:1,color:"primary"},14:{key:14,text:"Anthropic Claude",value:14,color:"info"},3:{key:3,text:"Azure OpenAI",value:3,color:"orange"},11:{key:11,text:"Google PaLM2",value:11,color:"orange"},24:{key:24,text:"Google Gemini",value:24,color:"orange"},15:{key:15,text:"\u767e\u5ea6\u6587\u5fc3\u5343\u5e06",value:15,color:"default"},17:{key:17,text:"\u963f\u91cc\u901a\u4e49\u5343\u95ee",value:17,color:"default"},18:{key:18,text:"\u8baf\u98de\u661f\u706b\u8ba4\u77e5",value:18,color:"default"},16:{key:16,text:"\u667a\u8c31 ChatGLM",value:16,color:"default"},19:{key:19,text:"360 \u667a\u8111",value:19,color:"default"},25:{key:25,text:"Moonshot AI",value:19,color:"default"},23:{key:23,text:"\u817e\u8baf\u6df7\u5143",value:23,color:"default"},8:{key:8,text:"\u81ea\u5b9a\u4e49\u6e20\u9053",value:8,color:"primary"},22:{key:22,text:"\u77e5\u8bc6\u5e93\uff1aFastGPT",value:22,color:"default"},21:{key:21,text:"\u77e5\u8bc6\u5e93\uff1aAI Proxy",value:21,color:"purple"},20:{key:20,text:"\u4ee3\u7406\uff1aOpenRouter",value:20,color:"primary"},2:{key:2,text:"\u4ee3\u7406\uff1aAPI2D",value:2,color:"primary"},5:{key:5,text:"\u4ee3\u7406\uff1aOpenAI-SB",value:5,color:"primary"},7:{key:7,text:"\u4ee3\u7406\uff1aOhMyGPT",value:7,color:"primary"},10:{key:10,text:"\u4ee3\u7406\uff1aAI Proxy",value:10,color:"primary"},4:{key:4,text:"\u4ee3\u7406\uff1aCloseAI",value:4,color:"primary"},6:{key:6,text:"\u4ee3\u7406\uff1aOpenAI Max",value:6,color:"primary"},9:{key:9,text:"\u4ee3\u7406\uff1aAI.LS",value:9,color:"primary"},12:{key:12,text:"\u4ee3\u7406\uff1aAPI2GPT",value:12,color:"primary"},13:{key:13,text:"\u4ee3\u7406\uff1aAIGC2D",value:13,color:"primary"}}},1736:function(e,t,n){n.d(t,{re:function(){return a}});n(1838);const a=10;n(8032)},8721:function(e,t,n){var a=n(4535),r=n(4598);const i=(0,a.Ay)(r.A)((e=>{let{theme:t}=e;return{padding:8,"& .MuiSwitch-track":{borderRadius:11,"&:before, &:after":{content:'""',position:"absolute",top:"50%",transform:"translateY(-50%)",width:16,height:16},"&:before":{backgroundImage:`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 24 24"><path fill="${encodeURIComponent(t.palette.getContrastText(t.palette.primary.main))}" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg>')`,left:12},"&:after":{backgroundImage:`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 24 24"><path fill="${encodeURIComponent(t.palette.getContrastText(t.palette.primary.main))}" d="M19,13H5V11H19V13Z" /></svg>')`,right:12}},"& .MuiSwitch-thumb":{boxShadow:"none",width:16,height:16,margin:2}}}));t.A=i},5098:function(e,t,n){n.d(t,{A:function(){return c}});var a=n(5263),r=n(4050),i=n(1787),l=n(6240),o=n(8302),s=n(579);function c(e){let{filterName:t,handleFilterName:n,placeholder:c}=e;const d=(0,l.A)().palette.grey[500];return(0,s.jsx)(a.A,{sx:{height:80,display:"flex",justifyContent:"space-between",p:e=>e.spacing(0,1,0,3)},children:(0,s.jsx)(r.A,{id:"keyword",sx:{minWidth:"100%"},value:t,onChange:n,placeholder:c,startAdornment:(0,s.jsx)(i.A,{position:"start",children:(0,s.jsx)(o.A,{stroke:1.5,size:"20px",color:d})})})})}},6101:function(e,t,n){n.r(t),n.d(t,{default:function(){return he}});var a=n(5043),r=n(9985),i=n(1806),l=n(3460),o=n(9650),s=n(864),c=n.n(s),d=n(9090),u=n(611),x=n(7254),h=n(196),p=n(5263),m=n(8911),A=n(5865),k=n(2518),j=n(2110),y=n(6446),g=n(9252),v=n(9456),f=n(2143),b=n(8076),w=n(2420),C=n(7739),T=n(7392),I=n(1020),Q=n(3462),S=n(6600),M=n(5316),P=n(8533),_=n(9347),z=n(8721),O=n(7510),F=n(1330),B=(0,n(7391).A)("caret-down-filled","IconCaretDownFilled",[["path",{d:"M18 9c.852 0 1.297 .986 .783 1.623l-.076 .084l-6 6a1 1 0 0 1 -1.32 .083l-.094 -.083l-6 -6l-.083 -.094l-.054 -.077l-.054 -.096l-.017 -.036l-.027 -.067l-.032 -.108l-.01 -.053l-.01 -.06l-.004 -.057v-.118l.005 -.058l.009 -.06l.01 -.052l.032 -.108l.027 -.067l.07 -.132l.065 -.09l.073 -.081l.094 -.083l.077 -.054l.096 -.054l.036 -.017l.067 -.027l.108 -.032l.053 -.01l.06 -.01l.057 -.004l12.059 -.002z",fill:"currentColor",key:"svg-0",strokeWidth:"0"}]]),L=n(1112),G=n(579);const R=[{key:"next",text:"ChatGPT Next",url:'https://chat.oneapi.pro/#/?settings={"key":"sk-{key}","url":"{serverAddress}"}',encode:!1},{key:"ama",text:"AMA \u95ee\u5929",url:"ama://set-api-key?server={serverAddress}&key=sk-{key}",encode:!0},{key:"opencat",text:"OpenCat",url:"opencat://team/join?domain={serverAddress}&token=sk-{key}",encode:!0}];function W(e){return(0,G.jsx)(G.Fragment,{children:e.map(((e,t)=>(0,G.jsxs)(f.A,{onClick:e.onClick,sx:{color:e.color},children:[e.icon,e.text]},t)))})}function $(e){let{item:t,manageToken:n,handleOpenModal:i,setModalTokenId:l}=e;const[o,s]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[u,x]=(0,a.useState)(!1),[p,A]=(0,a.useState)(t.status),j=(0,v.d4)((e=>e.siteInfo)),y=()=>{x(!1)},g=(e,t)=>{switch(t){case"copy":d(V);break;case"link":d(q);break;default:d($)}s(e.currentTarget)},f=()=>{s(null)},$=W([{text:"\u7f16\u8f91",icon:(0,G.jsx)(O.A,{style:{marginRight:"16px"}}),onClick:()=>{f(),i(),l(t.id)},color:void 0},{text:"\u5220\u9664",icon:(0,G.jsx)(F.A,{style:{marginRight:"16px"}}),onClick:()=>{f(),x(!0)},color:"error.main"}]),E=(e,n)=>{let a="";a=null!==j&&void 0!==j&&j.server_address?j.server_address:window.location.host,e.encode&&(a=encodeURIComponent(a));let i=e.url;"next"===e.key&&null!==j&&void 0!==j&&j.chat_link&&(i=j.chat_link+'/#/?settings={"key":"sk-{key}","url":"{serverAddress}"}');const l=function(e,t,n){return e.replace("{key}",t).replace("{serverAddress}",n)}(i,t.key,a);"link"===n?window.open(l):(navigator.clipboard.writeText(l),(0,r.Te)("\u5df2\u590d\u5236\u5230\u526a\u8d34\u677f\uff01")),f()},V=W(R.map((e=>({text:e.text,icon:void 0,onClick:()=>E(e,"copy"),color:void 0})))),q=W(R.map((e=>({text:e.text,icon:void 0,onClick:()=>E(e,"link"),color:void 0}))));return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(b.A,{tabIndex:t.id,children:[(0,G.jsx)(w.A,{children:t.name}),(0,G.jsx)(w.A,{children:(0,G.jsx)(C.A,{title:(()=>{switch(p){case 1:return"\u5df2\u542f\u7528";case 2:return"\u5df2\u7981\u7528";case 3:return"\u5df2\u8fc7\u671f";case 4:return"\u5df2\u8017\u5c3d";default:return"\u672a\u77e5"}})(),placement:"top",children:(0,G.jsx)(z.A,{id:`switch-${t.id}`,checked:1===p,onChange:async()=>{const e=1===p?2:1,{success:a}=await n(t.id,"status",e);a&&A(e)}})})}),(0,G.jsx)(w.A,{children:(0,r.X8)(t.usedQuota)}),(0,G.jsx)(w.A,{children:t.unlimitedQuota?"\u65e0\u9650\u5236":(0,r.X8)(t.remainQuota,2)}),(0,G.jsx)(w.A,{children:(0,r.gA)(t.createTime)}),(0,G.jsx)(w.A,{children:-1===t.expireTime?"\u6c38\u4e0d\u8fc7\u671f":(0,r.gA)(t.expireTime)}),(0,G.jsx)(w.A,{children:(0,G.jsxs)(m.A,{direction:"row",spacing:1,children:[(0,G.jsxs)(h.A,{size:"small","aria-label":"split button",children:[(0,G.jsx)(k.A,{color:"primary",onClick:()=>{navigator.clipboard.writeText(`sk-${t.key}`),(0,r.Te)("\u5df2\u590d\u5236\u5230\u526a\u8d34\u677f\uff01")},children:"\u590d\u5236"}),(0,G.jsx)(k.A,{size:"small",onClick:e=>g(e,"copy"),children:(0,G.jsx)(B,{size:"16px"})})]}),(0,G.jsxs)(h.A,{size:"small","aria-label":"split button",children:[(0,G.jsx)(k.A,{color:"primary",onClick:e=>E(R[0],"link"),children:"\u804a\u5929"}),(0,G.jsx)(k.A,{size:"small",onClick:e=>g(e,"link"),children:(0,G.jsx)(B,{size:"16px"})})]}),(0,G.jsx)(T.A,{onClick:e=>g(e,"action"),sx:{color:"rgb(99, 115, 129)"},children:(0,G.jsx)(L.A,{})})]})})]}),(0,G.jsx)(I.Ay,{open:!!o,anchorEl:o,onClose:f,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:c}),(0,G.jsxs)(Q.A,{open:u,onClose:y,children:[(0,G.jsx)(S.A,{children:"\u5220\u9664Token"}),(0,G.jsx)(M.A,{children:(0,G.jsxs)(P.A,{children:["\u662f\u5426\u5220\u9664Token ",t.name,"\uff1f"]})}),(0,G.jsxs)(_.A,{children:[(0,G.jsx)(k.A,{onClick:y,children:"\u5173\u95ed"}),(0,G.jsx)(k.A,{onClick:async()=>{f(),await n(t.id,"delete","")},sx:{color:"error.main"},autoFocus:!0,children:"\u5220\u9664"})]})]})]})}var E=n(4882);var V=()=>(0,G.jsx)(E.A,{children:(0,G.jsxs)(b.A,{children:[(0,G.jsx)(w.A,{children:"\u540d\u79f0"}),(0,G.jsx)(w.A,{children:"\u72b6\u6001"}),(0,G.jsx)(w.A,{children:"\u5df2\u7528\u989d\u5ea6"}),(0,G.jsx)(w.A,{children:"\u5269\u4f59\u989d\u5ea6"}),(0,G.jsx)(w.A,{children:"\u521b\u5efa\u65f6\u95f4"}),(0,G.jsx)(w.A,{children:"\u8fc7\u671f\u65f6\u95f4"}),(0,G.jsx)(w.A,{children:"\u64cd\u4f5c"})]})}),q=n(5098),D=n(3862),N=n(1736),H=n(1522),U=n(3991),X=n(3033),Y=n(3516),Z=n(6240),K=n(446),J=n.n(K),ee=n(9336),te=n(3193),ne=n(9190),ae=n(4050),re=n(1673),ie=n(4598),le=n(1787),oe=n(9302),se=n(8390),ce=n(4061);n(6484);const de=X.Ik().shape({is_edit:X.zM(),name:X.Yj().required("\u540d\u79f0 \u4e0d\u80fd\u4e3a\u7a7a"),remainQuota:X.ai().min(0,"\u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e0"),expireTime:X.ai(),unlimitedQuota:X.zM()}),ue={is_edit:!1,name:"",remainQuota:0,expireTime:-1,unlimitedQuota:!1};var xe=e=>{let{open:t,tokenId:n,onCancel:i,onOk:l}=e;const o=(0,Z.A)(),[s,c]=(0,a.useState)(ue);return(0,a.useEffect)((()=>{n&&(async()=>{let e=await D.n.get(`/api/token/${n}`);const{success:t,message:a,data:i}=e.data;t?(i.is_edit=!0,c(i)):(0,r.Qg)(a)})().then()}),[n]),(0,G.jsxs)(Q.A,{open:t,onClose:i,fullWidth:!0,maxWidth:"md",children:[(0,G.jsx)(S.A,{sx:{margin:"0px",fontWeight:700,lineHeight:"1.55556",padding:"24px",fontSize:"1.125rem"},children:n?"\u7f16\u8f91Token":"\u65b0\u5efaToken"}),(0,G.jsx)(ee.A,{}),(0,G.jsxs)(M.A,{children:[(0,G.jsx)(x.A,{severity:"info",children:"\u6ce8\u610f\uff0c\u4ee4\u724c\u7684\u989d\u5ea6\u4ec5\u7528\u4e8e\u9650\u5236\u4ee4\u724c\u672c\u8eab\u7684\u6700\u5927\u989d\u5ea6\u4f7f\u7528\u91cf\uff0c\u5b9e\u9645\u7684\u4f7f\u7528\u53d7\u5230\u8d26\u6237\u7684\u5269\u4f59\u989d\u5ea6\u9650\u5236\u3002"}),(0,G.jsx)(Y.l1,{initialValues:s,enableReinitialize:!0,validationSchema:de,onSubmit:async(e,t)=>{let a,{setErrors:i,setStatus:o,setSubmitting:s}=t;s(!0),e.remainQuota=parseInt(e.remainQuota),a=e.is_edit?await D.n.put("/api/token/",{...e,id:parseInt(n)}):await D.n.post("/api/token/",e);const{success:c,message:d}=a.data;c?(e.is_edit?(0,r.Te)("\u4ee4\u724c\u66f4\u65b0\u6210\u529f\uff01"):(0,r.Te)("\u4ee4\u724c\u521b\u5efa\u6210\u529f\uff0c\u8bf7\u5728\u5217\u8868\u9875\u9762\u70b9\u51fb\u590d\u5236\u83b7\u53d6\u4ee4\u724c\uff01"),s(!1),o({success:!0}),l(!0)):((0,r.Qg)(d),i({submit:d}))},children:e=>{let{errors:t,handleBlur:n,handleChange:a,handleSubmit:l,touched:s,values:c,setFieldError:d,setFieldValue:u,isSubmitting:x}=e;return(0,G.jsxs)("form",{noValidate:!0,onSubmit:l,children:[(0,G.jsxs)(te.A,{fullWidth:!0,error:Boolean(s.name&&t.name),sx:{...o.typography.otherInput},children:[(0,G.jsx)(ne.A,{htmlFor:"channel-name-label",children:"\u540d\u79f0"}),(0,G.jsx)(ae.A,{id:"channel-name-label",label:"\u540d\u79f0",type:"text",value:c.name,name:"name",onBlur:n,onChange:a,inputProps:{autoComplete:"name"},"aria-describedby":"helper-text-channel-name-label"}),s.name&&t.name&&(0,G.jsx)(re.A,{error:!0,id:"helper-tex-channel-name-label",children:t.name})]}),-1!==c.expireTime&&(0,G.jsxs)(te.A,{fullWidth:!0,error:Boolean(s.expireTime&&t.expireTime),sx:{...o.typography.otherInput},children:[(0,G.jsx)(se.$,{dateAdapter:oe.R,adapterLocale:"zh-cn",children:(0,G.jsx)(ce.K,{label:"\u8fc7\u671f\u65f6\u95f4",ampm:!1,value:J().unix(c.expireTime),onError:e=>{d("expireTime",null===e?null:"\u65e0\u6548\u7684\u65e5\u671f")},onChange:e=>{u("expireTime",e.unix())},slotProps:{actionBar:{actions:["today","accept"]}}})}),t.expireTime&&(0,G.jsx)(re.A,{error:!0,id:"helper-tex-channel-expired_time-label",children:t.expireTime})]}),(0,G.jsx)(ie.A,{checked:-1===c.expireTime,onClick:()=>{-1===c.expireTime?u("expireTime",Math.floor(Date.now()/1e3)):u("expireTime",-1)}})," ","\u6c38\u4e0d\u8fc7\u671f",(0,G.jsxs)(te.A,{fullWidth:!0,error:Boolean(s.remainQuota&&t.remainQuota),sx:{...o.typography.otherInput},children:[(0,G.jsx)(ne.A,{htmlFor:"channel-remain_quota-label",children:"\u989d\u5ea6"}),(0,G.jsx)(ae.A,{id:"channel-remain_quota-label",label:"\u989d\u5ea6",type:"number",value:c.remainQuota,name:"remainQuota",endAdornment:(0,G.jsx)(le.A,{position:"end",children:(0,r.t0)(c.remainQuota)}),onBlur:n,onChange:a,"aria-describedby":"helper-text-channel-remain_quota-label",disabled:c.unlimitedQuota}),s.remainQuota&&t.remainQuota&&(0,G.jsx)(re.A,{error:!0,id:"helper-tex-channel-remain_quota-label",children:t.remainQuota})]}),(0,G.jsx)(ie.A,{checked:!0===c.unlimitedQuota,onClick:()=>{u("unlimitedQuota",!c.unlimitedQuota)}})," ","\u65e0\u9650\u989d\u5ea6",(0,G.jsxs)(_.A,{children:[(0,G.jsx)(k.A,{onClick:i,children:"\u53d6\u6d88"}),(0,G.jsx)(k.A,{disableElevation:!0,disabled:x,type:"submit",variant:"contained",color:"primary",children:"\u63d0\u4ea4"})]})]})}})]})]})};function he(){const[e,t]=(0,a.useState)([]),[n,s]=(0,a.useState)(0),[f,b]=(0,a.useState)(!1),[w,C]=(0,a.useState)(""),[T,I]=(0,a.useState)(!1),[Q,S]=(0,a.useState)(0),M=(0,v.d4)((e=>e.siteInfo)),P=async n=>{b(!0);const a=await D.n.get(`/api/token/?p=${n}`),{success:i,message:l,data:o}=a.data;if(i)if(0===n)t(o);else{let a=[...e];a.splice(n*N.re,o.length,...o),t(a)}else(0,r.Qg)(l);b(!1)};(0,a.useEffect)((()=>{P(0).then().catch((e=>{(0,r.Qg)(e)}))}),[]);const _=async(e,t,n)=>{const a="/api/token/";let i,l={id:e};switch(t){case"delete":i=await D.n.delete(a+e);break;case"status":i=await D.n.put(a+"?withStatus=true",{...l,status:n})}const{success:o,message:s}=i.data;return o?((0,r.Te)("\u64cd\u4f5c\u6210\u529f\u5b8c\u6210\uff01"),"delete"===t&&await z()):(0,r.Qg)(s),i.data},z=async()=>{await P(n)},O=e=>{S(e),I(!0)},F=()=>{I(!1),S(0)};return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(m.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[(0,G.jsx)(A.A,{variant:"h4",children:"\u4ee4\u724c"}),(0,G.jsx)(k.A,{variant:"contained",color:"primary",onClick:()=>{O(0)},startIcon:(0,G.jsx)(H.A,{}),children:"\u65b0\u5efa\u4ee4\u724c"})]}),(0,G.jsx)(m.A,{mb:5,children:(0,G.jsxs)(x.A,{severity:"info",children:["\u5c06 OpenAI API \u57fa\u7840\u5730\u5740 https://api.openai.com \u66ff\u6362\u4e3a ",(0,G.jsx)("b",{children:M.server_address}),"\uff0c\u590d\u5236\u4e0b\u9762\u7684\u5bc6\u94a5\u5373\u53ef\u4f7f\u7528"]})}),(0,G.jsxs)(j.A,{children:[(0,G.jsx)(y.A,{component:"form",onSubmit:async e=>{if(e.preventDefault(),""===w)return await P(0),void s(0);b(!0);const n=await D.n.get(`/api/token/search?keyword=${w}`),{success:a,message:i,data:l}=n.data;a?(t(l),s(0)):(0,r.Qg)(i),b(!1)},noValidate:!0,children:(0,G.jsx)(q.A,{filterName:w,handleFilterName:e=>{C(e.target.value)},placeholder:"\u641c\u7d22\u4ee4\u724c\u7684\u540d\u79f0..."})}),(0,G.jsx)(p.A,{sx:{textAlign:"right",height:50,display:"flex",justifyContent:"space-between",p:e=>e.spacing(0,1,0,3)},children:(0,G.jsx)(g.A,{children:(0,G.jsx)(h.A,{variant:"outlined","aria-label":"outlined small primary button group",children:(0,G.jsx)(k.A,{onClick:z,startIcon:(0,G.jsx)(U.A,{width:"18px"}),children:"\u5237\u65b0"})})})}),f&&(0,G.jsx)(u.A,{}),(0,G.jsx)(c(),{component:"div",children:(0,G.jsx)(o.A,{sx:{overflow:"unset"},children:(0,G.jsxs)(i.A,{sx:{minWidth:800},children:[(0,G.jsx)(V,{}),(0,G.jsx)(l.A,{children:e.slice(n*N.re,(n+1)*N.re).map((e=>(0,G.jsx)($,{item:e,manageToken:_,handleOpenModal:O,setModalTokenId:S},e.id)))})]})})}),(0,G.jsx)(d.A,{page:n,component:"div",count:e.length+(e.length%N.re===0?1:0),rowsPerPage:N.re,onPageChange:(t,n)=>{(async()=>{n===Math.ceil(e.length/N.re)&&await P(n),s(n)})()},rowsPerPageOptions:[N.re]})]}),(0,G.jsx)(xe,{open:T,onCancel:F,onOk:e=>{!0===e&&(F(),z())},tokenId:Q})]})}}}]);
//# sourceMappingURL=101.990c9a66.chunk.js.map